#CQRS на уровне репозиториев и сервисов

Самый простой и дешевый способ разбить приложение на чтение и запись.
Разделяем репозитории и сервисы на Query и Command. Методы которые меняют состояние не должны возвращать значения.
В некоторых случаях допускается возвращать ID если используется автоинкримент в качестве первичного ключа, а так же 
проверки типа hasUser, hasEmail. Если же мы что-то проверяем перед записью нужно чтение делать в командах потому что 
мы не уверены в консистенстности данных в рид моделях.




Для elacticsearch возможно придется выставить:

`sudo sysctl -w vm.max_map_count=262144`

###Postgres
Инициализация slave, нужно выполнить на slave машине 
su - postgres -c "pg_basebackup --host=postgres --username=default --pgdata=/var/lib/postgresql/data --wal-method=stream --write-recovery-conf"

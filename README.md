#CQRS на уровне репозиториев и сервисов

Способ разделения на отдельные команды и запросы. Это более затратный способ по времени, но более соответствует первому 
принципу единной ответственности, так как один класс содержит одну команду.

В данной реализации есть DTO которая принимается в обработчиках в качестве аргумента. 
Это урощенный вариант. Обычно данный механизм реализуется через поведенческий паттерн проектирования "Команда".

Суть заключается в том что некая DTO попадается в шину комманд которая обрабатыается или через деспетчер или через очереди
хендлерами. Например если мы используем очередь будет меньше проблем с конкурентностью запросов. а во вторых это может 
снизить пиковые нагрузки на запись т.к. мы не пишем данные сразу в мастер таблицу а откладываем это в очередь. 
Но нужно понимать допускается ли такое поводение бизнес требованиями.

Как правило в доменном слое содержатся команды (те классы которые меняют состояние системы), а запросы выносятся в
на другой слой чтобы облегчить доменую модель.



Для elacticsearch возможно придется выставить:

`sudo sysctl -w vm.max_map_count=262144`

###Postgres
Инициализация slave, нужно выполнить на slave машине 
su - postgres -c "pg_basebackup --host=postgres --username=default --pgdata=/var/lib/postgresql/data --wal-method=stream --write-recovery-conf"
